---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navigation from "../../components/Navigation.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf(),
);
---

<BaseLayout title="Blog | Mayke Jaspers">
    <Navigation />

    <main class="blog-page">
        <section class="blog-hero">
            <div class="blog-hero-inner">
                <h1 class="blog-hero-title">MY BLOG</h1>
            </div>
        </section>

        <section class="blog-list-section">
            <div class="blog-list-inner">
                {
                    posts.map((post) => (
                        <article class="blog-list-item">
                            <a
                                href={`/blog/${post.slug}`}
                                class="blog-list-thumb"
                            >
                                {post.data.video ? (
                                    <video
                                        src={post.data.video}
                                        class="blog-list-img"
                                        autoplay
                                        muted
                                        loop
                                        playsinline
                                    />
                                ) : post.data.image ? (
                                    <img
                                        src={post.data.image}
                                        alt={post.data.title}
                                        class="blog-list-img"
                                        loading="lazy"
                                    />
                                ) : null}
                            </a>

                            <div class="blog-list-content">
                                <h2 class="blog-list-title">
                                    {post.data.title}
                                </h2>
                                <p class="blog-list-excerpt">
                                    {post.data.description}
                                </p>
                                <a
                                    href={`/blog/${post.slug}`}
                                    class="blog-list-button"
                                >
                                    READ MORE
                                </a>
                            </div>
                        </article>
                    ))
                }
            </div>
        </section>
    </main>
</BaseLayout>
