---
import BaseLayout from "../layouts/BaseLayout.astro";
import Navigation from "../components/Navigation.astro";
import { getCollection } from "astro:content";

const projectPreviews = (await getCollection("projects"))
	.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
	.slice(0, 3);

const blogPosts = (await getCollection("blog"))
	.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
	.slice(0, 3);

const programs = [
	{ name: "Photoshop", icon: "/src/images/tools/photoshop.png" },
	{ name: "Figma", icon: "/src/images/tools/figma.webp" },
	{ name: "Astro", icon: "/src/images/tools/astro.png" },
	{ name: "Blender", icon: "/src/images/tools/blender.png" },
	{ name: "Premiere Pro", icon: "/src/images/tools/premiere.png" },
	{ name: "Illustrator", icon: "/src/images/tools/illustrator.png" },
	{ name: "After Effects", icon: "/src/images/tools/after-effects.png" },
];
---

<BaseLayout title="Home | Mayke Jaspers">
	<Navigation />
	<main class="home-main">
		<section class="hero-content">
			<h1>CREATIVE<br /><span class="accent">PORTFOLIO</span></h1>
			<p class="hero-desc">
				Welcome! Hi my name is mayke and here you can find all my
				digital projects and experiments below.
			</p>
			<a class="projects-link" href="/projects">
				View Projects
				<span class="scribble-underline"></span>
			</a>
		</section>

		<section class="marquee-section">
			<div class="marquee">
				<div class="marquee-inner">
					<span
						>CREATIVE THINKING &nbsp; • &nbsp; CREATIVE THINKING
						&nbsp; • &nbsp; CREATIVE THINKING &nbsp; • &nbsp;
						CREATIVE THINKING &nbsp; • &nbsp;</span
					>
					<span
						>CREATIVE THINKING &nbsp; • &nbsp; CREATIVE THINKING
						&nbsp; • &nbsp; CREATIVE THINKING &nbsp; • &nbsp;
						CREATIVE THINKING &nbsp; • &nbsp;</span
					>
				</div>
			</div>
		</section>
		<section class="projects-gallery">
			<h2>Latest<span class="accent">projects</span></h2>
			<div class="projects-gallery-list">
				{
					projectPreviews.map((project) => (
						<a
							href={`/projects/${project.slug}`}
							class="project-gallery-tile"
							aria-label={project.data.title}
						>
							<img
								src={project.data.image}
								alt={project.data.title}
								class="project-gallery-img"
								loading="lazy"
							/>
							<div class="project-gallery-title">
								{project.data.title}
							</div>
						</a>
					))
				}
			</div>
		</section>

		<section class="tools-section">
			<h2>Tools &<span class="accent">programs</span></h2>
			<div class="tools-grid">
				{
					programs.map(({ name, icon }) => (
						<div class="tool-item">
							<div class="tool-icon">
								<img src={icon} alt={name + " logo"} />
							</div>
							<span class="tool-name">{name}</span>
						</div>
					))
				}
			</div>
		</section>
		<section class="blog-preview-section">
			<h2>Latest<span class="accent">blog posts</span></h2>
			<div class="blog-preview-grid">
				{
					blogPosts.map((post) => (
						<a
							href={`/blog/${post.slug}`}
							class="blog-preview-card"
						>
							{post.data.image && (
								<img
									src={post.data.image}
									alt={post.data.title}
									class="blog-preview-img"
									loading="lazy"
								/>
							)}
							<div class="blog-preview-info">
								<span class="blog-preview-label">Blog</span>
								<h3 class="blog-preview-h3">
									{post.data.title}
								</h3>
								<span class="blog-preview-desc">
									{post.data.description}
								</span>
							</div>
							<span class="blog-preview-arrow">→</span>
						</a>
					))
				}
			</div>
		</section>
	</main>
</BaseLayout>
